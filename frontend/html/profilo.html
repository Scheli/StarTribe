<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Profilo Utente</title>
  <link rel="stylesheet" href="../style/profilo.css" />
  <link rel="stylesheet" href="../style/popup.css" />
  <link rel="stylesheet" href="../style/decorations.css" />
</head>
<body>
  <!-- Navbar -->
 <nav class="navbar">
  <div class="navbar-content">
    
    <!-- Sinistra: Titolo / Username -->
    <div class="navbar-left">
      <span class="navbar-title" id="navUsername">Profilo</span>
    </div>

    <!-- Destra: Icone navigazione -->
    <div class="navbar-right">
      <button class="news-icon-btn"><a href="/frontend/html/news.html" class="testoLink">üì∞</a></button>
      <button class="news-icon-btn"><a href="/frontend/html/pubblicapost.html" class="testoLink">‚ûï</a></button>
      <button class="news-icon-btn"><a href="/frontend/html/visualizzapost.html" class="testoLink">üåç</a></button>
      <button class="news-icon-btn"><a href="/frontend/html/chat.html" class="testoLink">üí¨</a></button>
      <button class="news-icon-btn"><a href="/frontend/html/space_road.html" class="testoLink">üöÄ</a></button>
      <button class="news-icon-btn"><a href="/frontend/html/index.html" class="testoLink">üè†</a></button>
    </div>

  </div>
</nav>
 
  <!-- Banner utente -->
  <div id="bannerProfilo" class="banner-profilo"></div>
   
 
  <!-- Sezione principale: foto profilo + info utente -->
   <main class="profilo-layout">
 <aside class="user-info-box">
      <div id="mediaProfilo" class="media-profilo"></div>
        <div id="selectedBorderBox">
        <img id="selectedBorderImg" alt="Cornice selezionata"/>
        <div style="font-size:.9rem; opacity:.8; margin-top:6px;">Decorazione selezionata</div>
      </div>

<!---Informazioni Utente--->
  <div class="info-base">
    <h3>Informazioni Utente</h3>
    <div class="ig-stats" aria-label="Statistiche profilo">
      <div class="stat" id="openFollower" role="button" tabindex="0" aria-label="Apri follower">
        <div id="countFollower" class="num">0</div>
        <div class="lbl">Follower</div>
      </div>
        <div class="stat" id="openSeguiti" role="button" tabindex="0" aria-label="Apri seguiti">
          <div id="countSeguiti" class="num">0</div>
          <div class="lbl">Seguiti</div>
        </div>
    </div>
        <div class="user-info-details">
          <p><strong>Username:</strong> <span id="usernameDisplay"></span></p>
          <p><strong>Email:</strong> <span id="emailDisplay"></span></p>
          <p><strong>Data di nascita:</strong> <span id="birthdateDisplay"></span></p>
          <p><strong>Punti:</strong> <span id="puntiDisplay"></span></p>
        </div>
        <div class="azioni-utente">
          <button id="btnModificaInfo">Modifica informazioni</button>
          <button id="btnModificaBanner">Modifica banner</button>
          <button id="btnModificaMedia">Modifica immagine profilo</button>
        </div>
      </div>
    </aside>

 
  <!-- Sezione Post -->
  <section class="posts-section">
 
    <!-- Colonna centrale con i post -->
    <div class="post-container" id="postContainer">
      <h2 class="posts-title">Post di <span id="postUsername"></span></h2>
    </div>
 
  <!-- Sezione decorazioni -->
  <section class="bordi-wrapper">
    <h3>Decorazioni disponibili</h3>
    <div class="bordi-grid" id="bordiGrid">
      <div class="bordo-card">
        <img class="pfp-border" data-border="bronzo" src="/frontend/assets/border-bronzo.png" alt="Bronzo">
        <div class="bordo-label">Bronzo</div>
      </div>
      <div class="bordo-card">
        <img class="pfp-border" data-border="argento" src="/frontend/assets/border-argento.png" alt="Argento">
        <div class="bordo-label">Argento</div>
      </div>
      <div class="bordo-card">
        <img class="pfp-border" data-border="oro" src="/frontend/assets/border-oro.png" alt="Oro">
        <div class="bordo-label">Oro</div>
      </div>
      <div class="bordo-card">
        <img class="pfp-border" data-border="platino" src="/frontend/assets/border-platino.png" alt="Platino">
        <div class="bordo-label">Platino</div>
      </div>
      <div class="bordo-card">
        <img class="pfp-border" data-border="rubino" src="/frontend/assets/border-rubino.png" alt="Rubino">
        <div class="bordo-label">Rubino</div>
      </div>
      <div class="bordo-card">
        <img class="pfp-border" data-border="diamante" src="/frontend/assets/border-diamante.png" alt="Diamante">
        <div class="bordo-label">Diamante</div>
      </div>
      <div class="bordo-card">
        <img class="pfp-border" data-border="universo" src="/frontend/assets/border-universo.png" alt="Universo">
        <div class="bordo-label">Universo</div>
      </div>
    </div>
  </section>
 
  <!-- Bottone logout -->
  <div class="logout-section">
    <button id="logoutBtn">Logout</button>
  </div>
 
  <!-- Modifica informazioni -->
  <div id="modalInfo" class="modal-overlay">
    <div class="modal-content">
      <h3>Modifica informazioni utente</h3>
      <form id="modificaForm">
        <label>Username: </label>
        <input type="text" id="usernameInput">
        <label>Data di nascita:</label>
        <input type="date" id="birthdateInput">
        <button type="submit">Salva modifiche</button>
        <button type="button" class="btnChiudi" data-close="modalInfo">Chiudi</button>
      </form>
    </div>
  </div>
 
  <!-- Modifica banner -->
  <div id="modalBanner" class="modal-overlay">
    <div class="modal-content">
      <h3>Modifica banner</h3>
      <form id="bannerForm">
        <input type="file" name="file" accept="image/*" required />
        <button type="submit">Carica banner</button>
        <button type="button" class="btnChiudi" data-close="modalBanner">Chiudi</button>
      </form>
    </div>
  </div>
 
  <!-- Modifica immagine profilo -->
  <div id="modalMedia" class="modal-overlay">
    <div class="modal-content">
      <h3>Modifica immagine profilo</h3>
      <form id="uploadForm">
        <input type="file" name="file" accept="image/*,video/*" required />
        <button type="submit">Carica</button>
        <button type="button" class="btnChiudi" data-close="modalMedia">Chiudi</button>
      </form>
    </div>
  </div>
 
  <section class="post-wrapper">
  <h3>I tuoi post</h3>
  <div id="postContainer" class="post-container">
    <!-- I post verranno inseriti qui tramite JS -->
  </div>
</section>
 
  <!-- BOX CENTRALE: lista follower/seguiti -->
  <div id="modalUsers" class="modal-overlay">
    <div class="modal-content users">
      <h3 id="modalUsersTitle">Utenti</h3>
      <div id="userListContainer" class="userlist scroll"></div>
      <button type="button" class="btnChiudi" data-close="modalUsers">Chiudi</button>
    </div>
  </div>
 
  <script src="../js/utils/sanitize.js"></script>
  <script src="../js/profilo.js"></script>
  <script type="module" src="../js/areaprotetta.js"></script>
 
  <!-- Pulsante Album (in basso a destra) -->
  <a class="album-fab" href="album.html" aria-label="Apri album">
    <img src="../assets/album.png" alt="Album">
  </a>
 
  <script>
    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('token');
      window.location.href = 'login.html';
    });
 
    // Apertura modali
    document.getElementById("btnModificaInfo").addEventListener("click", () => {
      document.getElementById("modalInfo").style.display = "flex";
    });
    document.getElementById("btnModificaBanner").addEventListener("click", () => {
      document.getElementById("modalBanner").style.display = "flex";
    });
    document.getElementById("btnModificaMedia").addEventListener("click", () => {
      document.getElementById("modalMedia").style.display = "flex";
    });
 
    // Chiusura modali generica
    document.querySelectorAll(".btnChiudi").forEach(btn => {
      btn.addEventListener("click", e => {
        const target = e.target.getAttribute("data-close");
        document.getElementById(target).style.display = "none";
      });
    });
  </script>
</body>
</html>
 
 